{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\galle\\\\Documents\\\\GitHub\\\\Moveo-Fast-Online-Coding\\\\frontend\\\\src\\\\components\\\\CodeBlockDetails.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CodeBlockDetails = props => {\n  _s();\n  const navigate = useNavigate();\n  let bool = null;\n  let id = \"\";\n\n  //when the user clicks on any code block \n  const handleClick = () => {\n    //fire GET requst and some more statments\n    fetchMentorConnected();\n\n    //sets the values of codeBlock in props for mentor/student\n    props.setTitle(props.codeBlock.title);\n    props.setCode(props.codeBlock.code);\n  };\n  const fetchMentorConnected = async () => {\n    //GET requst from db to check if mentor is already connected\n    const response = await fetch('/api/mentor');\n    const json = await response.json();\n    const singleItem = json[0];\n    if (response.ok) {\n      bool = singleItem.isConnected;\n      id = singleItem._id;\n      if (!bool) {\n        //if mentor didn't connected yet --> navigate to mentor page \n        //and update the db\n        updateMentorConnected();\n        navigate('/mentorPage');\n      } else {\n        //if mentor already connected --> navigate to student page\n        navigate('/studentPage');\n      }\n    }\n  };\n\n  //PATCH request to db --> to update that the mentor is connected\n  const updateMentorConnected = async () => {\n    const isConnected = true;\n    const item = {\n      isConnected\n    };\n    const response = await fetch(\"api/mentor/\" + id, {\n      method: \"PATCH\",\n      body: JSON.stringify(item),\n      headers: {\n        'content-Type': 'application/json'\n      }\n    });\n    const json = await response.json();\n    if (response.ok) {\n      console.log(\"response is OK\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"codeBlock-details\",\n    onClick: handleClick,\n    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: props.codeBlock.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(CodeBlockDetails, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = CodeBlockDetails;\nexport default CodeBlockDetails;\nvar _c;\n$RefreshReg$(_c, \"CodeBlockDetails\");","map":{"version":3,"names":["useNavigate","CodeBlockDetails","props","navigate","bool","id","handleClick","fetchMentorConnected","setTitle","codeBlock","title","setCode","code","response","fetch","json","singleItem","ok","isConnected","_id","updateMentorConnected","item","method","body","JSON","stringify","headers","console","log"],"sources":["C:/Users/galle/Documents/GitHub/Moveo-Fast-Online-Coding/frontend/src/components/CodeBlockDetails.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\n\r\nconst CodeBlockDetails = (props) => {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    let bool = null\r\n    let id = \"\" \r\n\r\n    //when the user clicks on any code block \r\n    const handleClick = () => {  \r\n        \r\n        //fire GET requst and some more statments\r\n        fetchMentorConnected()\r\n\r\n        //sets the values of codeBlock in props for mentor/student\r\n        props.setTitle(props.codeBlock.title)\r\n        props.setCode(props.codeBlock.code)\r\n    };\r\n\r\n    const fetchMentorConnected = async ()  =>{\r\n\r\n        //GET requst from db to check if mentor is already connected\r\n        const response = await fetch('/api/mentor')\r\n        const json = await response.json()\r\n        const singleItem = json[0]\r\n        if(response.ok){\r\n            bool = singleItem.isConnected\r\n            id = singleItem._id\r\n\r\n            if(!bool){\r\n\r\n                //if mentor didn't connected yet --> navigate to mentor page \r\n                //and update the db\r\n                updateMentorConnected()\r\n                navigate('/mentorPage')\r\n            }else{\r\n\r\n                //if mentor already connected --> navigate to student page\r\n                navigate('/studentPage')\r\n            }\r\n        }\r\n    }\r\n\r\n    //PATCH request to db --> to update that the mentor is connected\r\n    const updateMentorConnected = async ()=>{\r\n        const isConnected = true\r\n        const item = {isConnected}\r\n        const response = await fetch(\"api/mentor/\" + id,{\r\n            method:\"PATCH\",\r\n            body:JSON.stringify(item),\r\n            headers:{\r\n                'content-Type':'application/json'\r\n            }\r\n        })\r\n        const json = await response.json()\r\n\r\n        if(response.ok){\r\n            console.log(\"response is OK\")\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"codeBlock-details\" onClick={handleClick}>\r\n      <h4>{props.codeBlock.title}</h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CodeBlockDetails\r\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAAC;AAE/C,MAAMC,gBAAgB,GAAIC,KAAK,IAAK;EAAA;EAEhC,MAAMC,QAAQ,GAAGH,WAAW,EAAE;EAE9B,IAAII,IAAI,GAAG,IAAI;EACf,IAAIC,EAAE,GAAG,EAAE;;EAEX;EACA,MAAMC,WAAW,GAAG,MAAM;IAEtB;IACAC,oBAAoB,EAAE;;IAEtB;IACAL,KAAK,CAACM,QAAQ,CAACN,KAAK,CAACO,SAAS,CAACC,KAAK,CAAC;IACrCR,KAAK,CAACS,OAAO,CAACT,KAAK,CAACO,SAAS,CAACG,IAAI,CAAC;EACvC,CAAC;EAED,MAAML,oBAAoB,GAAG,YAAY;IAErC;IACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAa,CAAC;IAC3C,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,EAAE;IAClC,MAAMC,UAAU,GAAGD,IAAI,CAAC,CAAC,CAAC;IAC1B,IAAGF,QAAQ,CAACI,EAAE,EAAC;MACXb,IAAI,GAAGY,UAAU,CAACE,WAAW;MAC7Bb,EAAE,GAAGW,UAAU,CAACG,GAAG;MAEnB,IAAG,CAACf,IAAI,EAAC;QAEL;QACA;QACAgB,qBAAqB,EAAE;QACvBjB,QAAQ,CAAC,aAAa,CAAC;MAC3B,CAAC,MAAI;QAED;QACAA,QAAQ,CAAC,cAAc,CAAC;MAC5B;IACJ;EACJ,CAAC;;EAED;EACA,MAAMiB,qBAAqB,GAAG,YAAU;IACpC,MAAMF,WAAW,GAAG,IAAI;IACxB,MAAMG,IAAI,GAAG;MAACH;IAAW,CAAC;IAC1B,MAAML,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAa,GAAGT,EAAE,EAAC;MAC5CiB,MAAM,EAAC,OAAO;MACdC,IAAI,EAACC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC;MACzBK,OAAO,EAAC;QACJ,cAAc,EAAC;MACnB;IACJ,CAAC,CAAC;IACF,MAAMX,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,EAAE;IAElC,IAAGF,QAAQ,CAACI,EAAE,EAAC;MACXU,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IACjC;EACJ,CAAC;EAEH,oBACE;IAAK,SAAS,EAAC,mBAAmB;IAAC,OAAO,EAAEtB,WAAY;IAAA,uBACtD;MAAA,UAAKJ,KAAK,CAACO,SAAS,CAACC;IAAK;MAAA;MAAA;MAAA;IAAA;EAAM;IAAA;IAAA;IAAA;EAAA,QAC5B;AAEV,CAAC;AAAC,GAjEIT,gBAAgB;EAAA,QAEDD,WAAW;AAAA;AAAA,KAF1BC,gBAAgB;AAmEtB,eAAeA,gBAAgB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}